<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>My Public IP - Powered by ipify</title>
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Tailwind CSS via CDN (for rapid modern styling) -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Tailwind Config -->
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
          },
          colors: {
            primary: '#6366f1',
            'primary-dark': '#4f46e5',
          },
          animation: {
            'fade-in': 'fadeIn 0.6s ease-out',
            'slide-up': 'slideUp 0.5s ease-out',
            'pulse-slow': 'pulse 3s infinite',
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' },
            },
            slideUp: {
              '0%': { transform: 'translateY(20px)', opacity: '0' },
              '100%': { transform: 'translateY(0)', opacity: '1' },
            },
          },
        },
      },
    }
  </script>

  <style>
    body {
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
    }
    .dark body {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    }
    .ip-display {
      font-variant-numeric: tabular-nums;
      letter-spacing: 0.05em;
    }
    .glass {
      background: rgba(255, 255, 255, 0.25);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }
    .dark .glass {
      background: rgba(30, 30, 50, 0.4);
      border: 1px solid rgba(100, 100, 150, 0.2);
    }
  </style>
</head>
<body class="font-sans text-gray-800 dark:text-gray-100 transition-colors duration-300">

  <!-- Dark Mode Toggle -->
  <div class="fixed top-6 right-6 z-50">
    <button id="theme-toggle" class="p-2 rounded-full bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-all duration-300">
      <svg id="sun" class="w-5 h-5 hidden dark:block text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
        <path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011- 1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zm-3.05-.293l-.707-.707a1 1 0 00-1.414 1.414l.707.707a1 1 0 001.414-1.414zM5 11a1 1 0 100-2H4a1 1 0 100 2h1z"/>
      </svg>
      <svg id="moon" class="w-5 h-5 block dark:hidden text-gray-700" fill="currentColor" viewBox="0 0 20 20">
        <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"/>
      </svg>
    </button>
  </div>

  <!-- Main Container -->
  <div class="min-h-screen flex items-center justify-center p-6">
    <div class="w-full max-w-2xl">
      
      <!-- Header -->
      <div class="text-center mb-10 animate-fade-in">
        <h1 class="text-4xl md:text-5xl font-bold mb-3 bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent">
          My Public IP
        </h1>
        <p class="text-lg text-gray-600 dark:text-gray-300">Instantly discover your public IP address</p>
      </div>

      <!-- Glass Card -->
      <div class="glass rounded-3xl shadow-2xl p-8 md:p-12 animate-slide-up">
        
        <!-- Loading State -->
        <div id="loading" class="text-center">
          <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/20 animate-pulse-slow mb-6">
            <svg class="w-8 h-8 text-primary animate-spin" fill="none" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
          </div>
          <p class="text-lg font-medium text-gray-700 dark:text-gray-300">Fetching your IP address...</p>
        </div>

        <!-- Result State -->
        <div id="result" class="hidden text-center">
          <div class="mb-8">
            <p class="text-sm uppercase tracking-wider text-gray-500 dark:text-gray-400 mb-2">Your Public IP Address</p>
            <div class="ip-display text-5xl md:text-6xl font-bold text-gray-900 dark:text-white tracking-wider select-all">
              <span id="ip-address">---.---.---.---</span>
            </div>
          </div>

          <!-- Additional Info -->
          <div id="extra-info" class="hidden space-y-4 text-left bg-white/50 dark:bg-gray-800/50 rounded-2xl p-6 backdrop-blur-sm">
            <div class="flex justify-between">
              <span class="font-medium text-gray-600 dark:text-gray-300">IP Version</span>
              <span id="ip-version" class="font-mono text-primary">IPv4</span>
            </div>
            <div class="flex justify-between">
              <span class="font-medium text-gray-600 dark:text-gray-300">Hostname</span>
              <span id="hostname" class="font-mono text-primary truncate max-w-[180px]">—</span>
            </div>
            <div class="flex justify-between">
              <span class="font-medium text-gray-600 dark:text-gray-300">Location</span>
              <span id="location" class="font-mono text-primary">—</span>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="flex flex-col sm:flex-row gap-3 mt-8">
            <button id="copy-btn" class="flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-primary hover:bg-primary-dark text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
              </svg>
              Copy IP
            </button>
            <button id="refresh-btn" class="flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-100 font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
              </svg>
              Refresh
            </button>
          </div>

          <!-- More Info Toggle -->
          <button id="toggle-info" class="mt-6 text-sm text-primary hover:text-primary-dark font-medium flex items-center gap-1 mx-auto transition-colors">
            <span>Show more info</span>
            <svg id="chevron-down" class="w-4 h-4 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>
        </div>

        <!-- Error State -->
        <div id="error" class="hidden text-center">
          <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-100 dark:bg-red-900/30 mb-6">
            <svg class="w-8 h-8 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
            </svg>
          </div>
          <p class="text-lg font-medium text-gray-700 dark:text-gray-300 mb-2">Failed to fetch IP address</p>
          <p class="text-sm text-gray-500 dark:text-gray-400 mb-6">Please check your internet connection and try again.</p>
          <button id="retry-btn" class="px-6 py-3 bg-primary hover:bg-primary-dark text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl">
            Try Again
          </button>
        </div>
      </div>

      <!-- Footer -->
      <div class="text-center mt-10 text-sm text-gray-500 dark:text-gray-400">
        <p>Powered by <a href="https://www.ipify.org" target="_blank" class="text-primary hover:underline font-medium">ipify.org</a> • Free & Reliable IP API</p>
      </div>
    </div>
  </div>

  <!-- Main Script -->
  <script>
    // DOM Elements
    const loadingEl = document.getElementById('loading');
    const resultEl = document.getElementById('result');
    const errorEl = document.getElementById('error');
    const ipAddressEl = document.getElementById('ip-address');
    const ipVersionEl = document.getElementById('ip-version');
    const hostnameEl = document.getElementById('hostname');
    const locationEl = document.getElementById('location');
    const extraInfoEl = document.getElementById('extra-info');
    const copyBtn = document.getElementById('copy-btn');
    const refreshBtn = document.getElementById('refresh-btn');
    const retryBtn = document.getElementById('retry-btn');
    const toggleInfoBtn = document.getElementById('toggle-info');
    const chevron = document.getElementById('chevron-down');
    const themeToggle = document.getElementById('theme-toggle');

    // State
    let currentIp = '';
    let infoVisible = false;

    // Fetch IP from ipify
    async function fetchIP() {
      try {
        showLoading();
        const response = await fetch('https://api.ipify.org?format=json');
        if (!response.ok) throw new Error('Network error');
        const data = await response.json();
        currentIp = data.ip;

        // Try to get more info from ip-api (free, no key needed)
        let extra = { version: 'IPv4', hostname: '—', location: '—' };
        try {
          const geoRes = await fetch(`https://ip-api.com/json/${currentIp}?fields=hostname,city,country`);
          if (geoRes.ok) {
            const geo = await geoRes.json();
            extra.hostname = geo.hostname || '—';
            extra.location = geo.city && geo.country ? `${geo.city}, ${geo.country}` : '—';
          }
        } catch (e) {
          console.warn('Extra info failed:', e);
        }

        showResult(currentIp, extra);
      } catch (err) {
        console.error(err);
        showError();
      }
    }

    // UI States
    function showLoading() {
      loadingEl.classList.remove('hidden');
      resultEl.classList.add('hidden');
      errorEl.classList.add('hidden');
    }

    function showResult(ip, extra) {
      ipAddressEl.textContent = ip;
      ipVersionEl.textContent = extra.version;
      hostnameEl.textContent = extra.hostname;
      locationEl.textContent = extra.location;

      loadingEl.classList.add('hidden');
      resultEl.classList.remove('hidden');
      errorEl.classList.add('hidden');

      if (extra.hostname !== '—' || extra.location !== '—') {
        extraInfoEl.classList.remove('hidden');
      }
    }

    function showError() {
      loadingEl.classList.add('hidden');
      resultEl.classList.add('hidden');
      errorEl.classList.remove('hidden');
    }

    // Copy to clipboard
    copyBtn.addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(currentIp);
        const originalText = copyBtn.innerHTML;
        copyBtn.innerHTML = `
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
          </svg>
          Copied!
        `;
        setTimeout(() => {
          copyBtn.innerHTML = originalText;
        }, 2000);
      } catch (err) {
        alert('Failed to copy');
      }
    });

    // Refresh
    refreshBtn.addEventListener('click', fetchIP);
    retryBtn.addEventListener('click', fetchIP);

    // Toggle extra info
    toggleInfoBtn.addEventListener('click', () => {
      infoVisible = !infoVisible;
      if (infoVisible) {
        extraInfoEl.classList.remove('hidden');
        toggleInfoBtn.innerHTML = `<span>Hide details</span>
          <svg class="w-4 h-4 rotate-180 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>`;
      } else {
        extraInfoEl.classList.add('hidden');
        toggleInfoBtn.innerHTML = `<span>Show more info</span>
          <svg class="w-4 h-4 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>`;
      }
    });

    // Dark mode toggle
    themeToggle.addEventListener('click', () => {
      document.documentElement.classList.toggle('dark');
      localStorage.theme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
    });

    // Initialize theme
    if (localStorage.theme === 'dark' || (!localStorage.theme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      document.documentElement.classList.add('dark');
    }

    // Start app
    fetchIP();
  </script>
</body>
</html>
